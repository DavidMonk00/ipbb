---
pytest_venv_cc7_py2:
  stage: tests
  image: ${IPBUS_DOCKER_REGISTRY}/ipbb-dev-cc7:dev-ipbb-imgs__uhal2.7.2
  tags:
    - docker
    - xilinx-tools
  dependencies:
    - setup_cc7_py2_venv
  script:
    - source env.sh
    - source /software/Xilinx/Vivado/2018.3/settings64.sh
    - run-ipbb-pytests.sh

depparser_venv_cc7_py2:
  stage: tests
  image: ${IPBUS_DOCKER_REGISTRY}/ipbb-dev-cc7:dev-ipbb-imgs__uhal2.7.2
  tags:
    - docker
    - xilinx-tools
  dependencies:
    - setup_cc7_py2_venv
  script:
    - source env.sh
    - generate-ipbb-repo.py tests/repogen/abcd_d3.yml $TEMP
    - generate-ipbb-repo.py tests/repogen/broken_d3.yml $TEMP
    - generate-ipbb-repo.py tests/repogen/simple_d3.yml $TEMP
    - generate-ipbb-repo.py tests/repogen/simple_d3.yml $TEMP


# test_venv_centos8_py3:
#   stage: deps
#   image: ${IPBUS_DOCKER_REGISTRY}/ipbb-dev-centos8:dev-ipbb-imgs__uhal2.7.2
#   tags:
#     - docker
#     - xilinx-tools
#   dependencies:
#     - setup_centos8_py3_venv
#   script:
#     - source env.sh
#     - ipbb --version
#     - source /software/Xilinx/Vivado/2018.3/settings64.sh
#     - run-ipbb-pytests.sh